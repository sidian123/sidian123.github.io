(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{318:function(e,t,n){"use strict";n(126);var o={mousePosition:{x:0,y:0},init:function(){var e=this;document.addEventListener("mousemove",(function(t){e.mousePosition={x:t.clientX,y:t.clientY}}))},isMobile:function(){return window.innerWidth<576},escapeString:function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/ /g,"&nbsp;")},filterHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent},isElementInViewport:function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var rect=e.getBoundingClientRect();return rect.top>=0&&rect.left>=0&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)},mouseInElement:function(element){var e=this.mousePosition,t=element.getBoundingClientRect().left,n=element.getBoundingClientRect().top,o=element.offsetWidth,r=element.offsetHeight;return e.x>t&&e.x<t+o&&e.y>n&&e.y<n+r},addGestureEvent:function(e){var t=null,n=null;document.addEventListener("touchstart",(function(e){var n=e.targetTouches[0];t={x:n.clientX,y:n.clientY}})),document.addEventListener("touchend",(function(o){var r=o.changedTouches[0],c=(n={x:r.clientX,y:r.clientY}).x-t.x,l=n.y-t.y;Math.abs(c)>Math.abs(l)?Math.abs(c)>.2*window.innerWidth&&e(c>0?"right":"left"):Math.abs(l)>window.innerHeight*(1/3)&&e(l>0?"down":"top")}))}};t.a=(o.init(),o)},329:function(e,t,n){"use strict";n(129);var o=n(369),r=(n(86),n(39),n(29),n(318)),c={name:"Search",data:function(){return{items:[],targetText:"",selectedIndex:0}},watch:{targetText:function(text){this.$emit("inputChange",this.targetText)}},mounted:function(){var e=this;document.addEventListener("scroll",(function(t){r.a.mouseInElement(e.$refs.itemGroup,t)&&t.preventDefault()}))},methods:{init:function(){this.items=[],this.selectedIndex=0},setItems:function(e){this.init(),this.items=e},focus:function(){this.$refs.input.focus(),this.$refs.input.select()},itemClickHandle:function(e){null!=e.handler&&(e.handler(),this.$emit("confirm",e))},handleKeyEvent:function(e){var t=this;switch(e.key){case"ArrowUp":this.selectedIndex>0&&(this.selectedIndex--,this.$nextTick().then((function(){return t.keepSelectedItemInView()}))),e.preventDefault();break;case"ArrowDown":this.selectedIndex<this.items.length-1&&(this.selectedIndex++,this.$nextTick().then((function(){return t.keepSelectedItemInView()}))),e.preventDefault();break;case"Enter":this.items.length>0&&this.getSelectedItem().click()}},getSelectedItem:function(){var e=!0,t=!1,n=void 0;try{for(var o,r=this.$refs.itemGroup.children[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var c=o.value;if(c.classList.contains("selected"))return c}}catch(e){t=!0,n=e}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}},keepSelectedItemInView:function(){var e=this.getSelectedItem(),t=e.parentElement;t.scrollTop+t.offsetHeight-parseInt(getComputedStyle(t).borderBottomWidth)+parseInt(getComputedStyle(t).paddingTop)<=e.offsetTop+4&&(t.scrollTop=e.offsetTop-parseInt(getComputedStyle(t).height)+e.offsetHeight),t.scrollTop>=e.offsetTop+e.offsetHeight-4&&(t.scrollTop=e.offsetTop)}}},l=(n(375),n(26)),d=Object(l.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-panel"},[n("div",{staticClass:"search-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.targetText,expression:"targetText"}],ref:"input",domProps:{value:e.targetText},on:{keydown:e.handleKeyEvent,click:function(e){e.stopPropagation()},input:function(t){t.target.composing||(e.targetText=t.target.value)}}})]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.items.length>0,expression:"items.length>0"}],ref:"itemGroup",staticClass:"item-group"},e._l(e.items,(function(t,o){return n("div",{key:o,staticClass:"item",class:{selected:e.selectedIndex===o},on:{click:function(n){return e.itemClickHandle(t)}}},[n("span",{staticClass:"item-content"},[e._v(e._s(t.content))]),e._v(" "),n("span",{staticClass:"item-description"},[e._v(e._s(t.description))])])})),0)])}),[],!1,null,"810fa4aa",null).exports,h=n(54),f=n.n(h),v=n(362),m={name:"CommonTools",components:{Search:d,Navigator:o.a},data:function(){return{isSearchVisible:!1,buttons:[{title:"主页",iconClass:"icon-home",handler:function(){location.assign("/")}},{title:"搜索",iconClass:"icon-search",handler:this.openSearch}],searchSchedule:new v.a(300)}},props:{pageJump:{type:Function,default:function(e){return location.assign("/article?id=".concat(e))}}},beforeCreate:function(){var e=this;document.addEventListener("keydown",(function(t){t.altKey&&"p"===t.key.toLowerCase()?(e.openSearch(),t.preventDefault()):"Escape"===t.key&&(e.isSearchVisible=!1)}))},methods:{addButton:function(button){this.buttons.push(button)},searchInputChangeHandle:function(text){var e=this;this.searchSchedule.addTask((function(){f.a.get("/repo/find/"+encodeURI(text)).then((function(t){var data=t.data,n=[];data.forEach((function(t){n.push({content:t.text,description:t.description,handler:e.searchHandlerForItem(t)})})),e.$refs.search.setItems(n)}))}))},searchHandlerForItem:function(e){var t=this;switch(e.type){case"post":return function(){t.pageJump(this.meta)}.bind(e)}},openSearch:function(){var e=this;this.isSearchVisible=!0,this.$nextTick((function(){return e.$refs.search.focus()}))}}},x=(n(377),Object(l.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isSearchVisible,expression:"isSearchVisible"}],staticClass:"mask"},[n("Search",{ref:"search",on:{inputChange:e.searchInputChangeHandle,confirm:function(t){e.isSearchVisible=!1}}})],1),e._v(" "),n("Navigator",{attrs:{buttons:e.buttons,position:{x:85,y:90}}})],1)}),[],!1,null,"0cb8aed8",null));t.a=x.exports},341:function(e,t,n){var content=n(374);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(52).default)("28c03b34",content,!0,{sourceMap:!1})},342:function(e,t,n){var content=n(376);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(52).default)("fb0ec7b4",content,!0,{sourceMap:!1})},343:function(e,t,n){var content=n(378);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(52).default)("a09a59e8",content,!0,{sourceMap:!1})},362:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(316),r=n(317),c=function(){function e(t){Object(o.a)(this,e),this.queue=[],this.interval=200,null!=t&&(this.interval=t)}return Object(r.a)(e,[{key:"addTask",value:function(e){this._push(e),this._run()}},{key:"_run",value:function(){var e=this;if(0!==this.queue.length){var t=this.queue[0];"running"!==t.state&&(t.state="running",setTimeout((function(){t.task(),e.queue.shift(),e._run()}),this.interval))}}},{key:"_push",value:function(e){this.queue.length<2?this.queue.push({state:"ready",task:e}):(this.queue.pop(),this.queue.push({state:"ready",task:e}))}}]),e}()},369:function(e,t,n){"use strict";n(320),n(339);var o=n(316),r=n(317),c=n(318),l=function(){function e(element,t,n,r,c){Object(o.a)(this,e),this.element=void 0,this.moveListener=function(){},this.moveOverListener=function(){},this.clickListener=function(){},this.isMove=!1,this.mouseDown=!1,this.notClick=!1,this.element=element,n&&(this.clickListener=n),r&&(this.moveListener=r),c&&(this.moveOverListener=c),this.element.style.position="fixed",this._move2(t||{x:0,y:0}),this._initListener()}return Object(r.a)(e,[{key:"_initListener",value:function(){this.element.addEventListener("mousedown",this._mousedownHandle.bind(this)),document.addEventListener("mouseup",this._mouseupHandle.bind(this)),document.addEventListener("mousemove",this._mousemoveHandle.bind(this)),this.element.addEventListener("touchmove",this._touchmoveHandle.bind(this)),this.element.addEventListener("touchend",this._touchendHandle.bind(this)),this.element.addEventListener("click",this._clickHandle.bind(this))}},{key:"_preventSelection",value:function(e){e.preventDefault()}},{key:"_mousedownHandle",value:function(e){c.a.mouseInElement(this.element,e)&&(this.mouseDown=!0,document.addEventListener("selectstart",this._preventSelection),e.preventDefault())}},{key:"_mouseupHandle",value:function(){this.mouseDown=!1,this.isMove&&(this.isMove=!1,this.moveOverListener(),document.removeEventListener("selectstart",this._preventSelection))}},{key:"_mousemoveHandle",value:function(e){this.mouseDown&&!c.a.mouseInElement(this.element,e)&&(this.isMove=!0),this.isMove&&(this._move({x:e.clientX,y:e.clientY}),this.notClick=!0,this.moveListener(e,"mouse"),e.preventDefault())}},{key:"_touchmoveHandle",value:function(e){var t=e.targetTouches[0];this._move({x:t.clientX,y:t.clientY}),this.moveListener(e,"touch"),e.preventDefault()}},{key:"_touchendHandle",value:function(e){this.moveOverListener()}},{key:"_move",value:function(e){e={x:(e={x:e.x-this.element.offsetWidth/2,y:e.y-this.element.offsetHeight/2}).x/window.innerWidth*100,y:e.y/window.innerHeight*100},this._move2(e)}},{key:"_move2",value:function(e){this.element.style.left=e.x+"%",this.element.style.top=e.y+"%"}},{key:"_clickHandle",value:function(e){this.notClick?this.notClick=!1:this.clickListener(e)}}]),e}(),d={name:"Navigator",data:function(){return{isShow:!1,isMove:!1,moveHelper:null}},props:{buttons:{type:Array,default:function(){return[]}},position:{type:Object,default:function(){return{x:0,y:0}}}},mounted:function(){var e=this;this.moveHelper=new l(this.$refs.navigator,this.position,this.handleNavClick,(function(){e.isMove=!0}),(function(){e.isMove=!1}));var t=this;document.addEventListener("click",(function(e){e.target!==t.$refs.mainBtn&&(t.isShow=!1)})),this.initShortcuts()},methods:{handleItemBtnClick:function(e){e&&e(),this.isShow=!1},handleNavClick:function(e){this.isShow=!this.isShow},initShortcuts:function(){var e=this;document.addEventListener("keydown",(function(t){t.altKey&&"j"===t.key.toLowerCase()&&(e.isShow=!e.isShow,e.$refs.navigator.focus())})),this.$refs.navigator.addEventListener("keyup",(function(t){var n=parseInt(t.key);Number.isNaN(n)||(e.handleItemBtnClick(e.buttons[n-1].handler),t.stopImmediatePropagation())}))}}},h=(n(373),n(26)),component=Object(h.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"navigator",staticClass:"navigator",attrs:{tabindex:"-1"}},[n("div",{ref:"mainBtn",staticClass:"main-btn unit",class:{active:e.isShow||e.isMove}}),e._v(" "),e.isShow?n("div",{staticClass:"btn-group"},e._l(e.buttons,(function(t,o){return n("div",{key:o,staticClass:"item unit"},[n("i",{staticClass:"iconfont",class:t.iconClass,on:{click:function(n){return e.handleItemBtnClick(t.handler)}}}),e._v(" "),n("span",{staticClass:"item-tip"},[e._v(e._s(o+1))])])})),0):e._e()])}),[],!1,null,"fde4411a",null);t.a=component.exports},373:function(e,t,n){"use strict";var o=n(341);n.n(o).a},374:function(e,t,n){(e.exports=n(51)(!1)).push([e.i,".navigator[data-v-fde4411a]{z-index:7000;position:fixed}.navigator[data-v-fde4411a]:focus{outline:none}.navigator .unit[data-v-fde4411a]{width:2rem;height:2rem}.navigator>.main-btn[data-v-fde4411a]{border-radius:50%;background-color:hsla(0,0%,100%,.5);box-shadow:inset 0 0 9px 1px #b2b2b2,0 0 7px 3px #a9a7a7;-webkit-transition:all 1s;transition:all 1s}.navigator>.active[data-v-fde4411a]{box-shadow:inset 0 0 9px 1px #b2b2b2,0 0 17px 3px #000;background-color:#fff}.navigator>.btn-group[data-v-fde4411a]{display:-webkit-box;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:reverse;flex-direction:column-reverse;position:absolute;bottom:3rem}.navigator>.btn-group>.item[data-v-fde4411a]{margin-top:.5rem;box-shadow:0 0 3px #000;color:#00ff43;position:relative}.navigator>.btn-group>.item>.iconfont[data-v-fde4411a]{font-size:2rem}.navigator>.btn-group>.item>.item-tip[data-v-fde4411a]{position:absolute;bottom:0;right:-.6rem;font-size:.6rem;color:#7f7a7a}",""])},375:function(e,t,n){"use strict";var o=n(342);n.n(o).a},376:function(e,t,n){(e.exports=n(51)(!1)).push([e.i,".search-panel[data-v-810fa4aa]{background-color:#fff;box-shadow:2px 2px 20px 1px #616161}.search-panel .search-input input[data-v-810fa4aa]{background-color:#fff;border-radius:4px;border:1px solid #dcdfe6;color:#606266;display:block;height:40px;line-height:40px;outline:none;padding:0 15px;-webkit-transition:border-color .2s cubic-bezier(.645,.045,.355,1);transition:border-color .2s cubic-bezier(.645,.045,.355,1);width:100%}.search-panel .search-input input[data-v-810fa4aa]:focus{border-color:#409eff}.search-panel .item-group[data-v-810fa4aa]{height:20rem;overflow:auto;position:relative}.search-panel .item-group .item[data-v-810fa4aa]{position:relative;padding:.4rem .5rem}.search-panel .item-group .item[data-v-810fa4aa]:hover{background-color:#8ae0ff}.search-panel .item-group .item .item-description[data-v-810fa4aa]{position:absolute;right:0;bottom:0;color:#949d93;font-size:.8rem}.search-panel .item-group .selected[data-v-810fa4aa]{background-color:#e8e8e8}",""])},377:function(e,t,n){"use strict";var o=n(343);n.n(o).a},378:function(e,t,n){(e.exports=n(51)(!1)).push([e.i,".input[data-v-0cb8aed8]{background-color:#fff;border-radius:4px;border:1px solid #dcdfe6;box-sizing:border-box;color:#606266;display:block;font-size:inherit;height:40px;line-height:40px;outline:none;padding:0 15px;-webkit-transition:border-color .2s cubic-bezier(.645,.045,.355,1);transition:border-color .2s cubic-bezier(.645,.045,.355,1)}.input[data-v-0cb8aed8]:hover{border-color:#c0c4cc}.input[data-v-0cb8aed8]:focus{border-color:#409eff}.button[data-v-0cb8aed8]{display:inline-block;line-height:1;white-space:nowrap;cursor:pointer;background:#fff;border:1px solid #dcdfe6;color:#606266;-webkit-appearance:none;text-align:center;box-sizing:border-box;outline:none;margin:0;-webkit-transition:.1s;transition:.1s;font-weight:500;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;padding:12px 20px;font-size:14px;border-radius:4px}@-webkit-keyframes blink-data-v-0cb8aed8{0%{opacity:.5}50%{opacity:1}to{opacity:.5}}@keyframes blink-data-v-0cb8aed8{0%{opacity:.5}50%{opacity:1}to{opacity:.5}}.mask[data-v-0cb8aed8]{background-color:rgba(0,0,0,.4);position:fixed;top:0;left:0;right:0;bottom:0;z-index:100}.container[data-v-0cb8aed8]{position:fixed;z-index:10000}.container>.mask>div[data-v-0cb8aed8]{margin:5rem auto 0;max-width:90%;width:400px}",""])}}]);