(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{333:function(e,t,o){"use strict";o.d(t,"a",(function(){return y}));o(86),o(359);var n=o(313),r=o(322),d=o(360),c=o.n(d),l=o(361),h=o.n(l),f=(o(362),o(123)),m=o(314),y=(o(334),function(){function e(t){Object(n.a)(this,e),this.marked=null,this.tocBuilder=new v,this.myOptions={lazyImage:!0,getImageAddress:function(e){return e}},Object.assign(this.myOptions,t),this.marked=c.a;var o=this._initOptions();o.renderer=this._initRender(),this.marked.setOptions(o)}return Object(r.a)(e,[{key:"parse",value:function(e){return this.tocBuilder=new v,{html:this.marked(e),toc:this.tocBuilder.build()}}},{key:"_initRender",value:function(){var e=new c.a.Renderer;return e.heading=this._headHandling.bind(this),e.image=this._imageHandling.bind(this),e}},{key:"_headHandling",value:function(text,e){text=m.a.filterHtml(text);var t=this.tocBuilder.add(text,e);return"<h".concat(e,' id="').concat(t.id,'">').concat(text,"</h").concat(e,">")}},{key:"_imageHandling",value:function(e,title,text){return e=this.myOptions.getImageAddress(e),this.myOptions.lazyImage?'<img src="'.concat(f.c,'" data-src="').concat(e,'" title="').concat(title,'" alt="').concat(text,'"/>'):'<img src="'.concat(e,'" title="').concat(title,'" alt="').concat(text,'"/>')}},{key:"_initOptions",value:function(){return{breaks:!0,highlight:this._codeHighlight}}},{key:"_codeHighlight",value:function(code,e){var t;try{t=h.a.highlight(e,code)}catch(e){t=h.a.highlightAuto(code)}return t.value}}]),e}()),v=function(){function e(){Object(n.a)(this,e),this.toc=[],this.headLevel=[0,0,0,0,0,0]}return Object(r.a)(e,[{key:"_incHeadLevel",value:function(e){this.headLevel[e-1]++;for(var i=e;i<6;i++)this.headLevel[i]=0}},{key:"add",value:function(text,e){this._incHeadLevel(e);var t={headLevel:Array.from(this.headLevel),text:text,id:"head-"+this.headLevel.join("-")};return this.toc.push(t),t}},{key:"build",value:function(){return this.toc}}]),e}();t.b=new y},335:function(e,t,o){var content=o(564);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(52).default)("54e71eea",content,!0,{sourceMap:!1})},343:function(e,t,o){var content=o(568);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(52).default)("fcb44e84",content,!0,{sourceMap:!1})},367:function(e,t,o){var content=o(368);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,o(52).default)("7d5d9058",content,!0,{sourceMap:!1})},368:function(e,t,o){(e.exports=o(51)(!1)).push([e.i,'.sidebar .subNode-group{counter-reset:toc-counter}.sidebar .subNode{counter-increment:toc-counter}.sidebar .text:before{content:counters(toc-counter,".") " "}.sidebar .head-1>.data>.text:before,.sidebar .head-4>.data>.text:before,.sidebar .head-5>.data>.text:before,.sidebar .head-6>.data>.text:before{content:""}.sidebar .head-5,.sidebar .head-6{max-height:0;opacity:0;-webkit-transition:all 1s;transition:all 1s;overflow:hidden}.sidebar .head-4:hover .head-5,.sidebar .head-5:hover .head-6{max-height:1000px;opacity:1}.markdown-body{counter-reset:body-h1 body-h2 body-h3 body-h4 body-h5 body-h6}.markdown-body h1{counter-reset:body-h2 body-h3 body-h4 body-h5 body-h6}.markdown-body h2{counter-reset:body-h3 body-h4 body-h5 body-h6}.markdown-body h3{counter-reset:body-h4 body-h5 body-h6}.markdown-body h4{counter-reset:body-h5 body-h6}.markdown-body h5{counter-reset:body-h6}.markdown-body h1:before{counter-increment:body-h1;content:counter(body-h1) " ";content:""}.markdown-body h2:before{counter-increment:body-h2;content:counter(body-h1) "." counter(body-h2) " "}.markdown-body h3:before{counter-increment:body-h3;content:counter(body-h1) "." counter(body-h2) "." counter(body-h3) " "}',""])},563:function(e,t,o){"use strict";var n=o(335);o.n(n).a},564:function(e,t,o){(e.exports=o(51)(!1)).push([e.i,".input{background-color:#fff;border-radius:4px;border:1px solid #dcdfe6;box-sizing:border-box;color:#606266;display:block;font-size:inherit;height:40px;line-height:40px;outline:none;padding:0 15px;-webkit-transition:border-color .2s cubic-bezier(.645,.045,.355,1);transition:border-color .2s cubic-bezier(.645,.045,.355,1)}.input:hover{border-color:#c0c4cc}.input:focus{border-color:#409eff}.button{display:inline-block;line-height:1;white-space:nowrap;cursor:pointer;background:#fff;border:1px solid #dcdfe6;color:#606266;-webkit-appearance:none;text-align:center;box-sizing:border-box;outline:none;margin:0;-webkit-transition:.1s;transition:.1s;font-weight:500;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;padding:12px 20px;font-size:14px;border-radius:4px}@-webkit-keyframes blink{0%{opacity:.5}50%{opacity:1}to{opacity:.5}}@keyframes blink{0%{opacity:.5}50%{opacity:1}to{opacity:.5}}.mask{background-color:rgba(0,0,0,.4);position:fixed;top:0;left:0;right:0;bottom:0;z-index:100}.md-view{display:-webkit-box;display:flex;height:100%;-webkit-box-align:start;align-items:flex-start}.md-view>.toc{flex-basis:200px;height:100%;flex-shrink:0;overflow:auto;background-color:#fff;-webkit-transition:all .1s;transition:all .1s}.md-view>.toc>.toc-item:hover{background-color:#e8e8e8;border-bottom:1px solid #000}.md-view>.toc-open{margin-left:-200px}.md-view>.md-container{-webkit-box-flex:1;flex-grow:1;height:100%;overflow:auto;position:relative}.md-view>.md-container>.markdown-body{width:80%;min-height:1000px;padding:1rem 2rem;margin:2rem auto;background-color:#fff;box-shadow:2px 2px 19px 8px #cdcdcd}.md-view>.md-container>.markdown-body ol ol,.md-view>.md-container>.markdown-body ul ol{list-style-type:decimal}@media screen and (max-width:575px){.md-view>.toc{position:fixed;top:0;bottom:0;left:-100%;width:100%;z-index:100}.md-view>.toc-open{left:0;margin-left:unset}.md-view>.md-container>.markdown-body{width:100%;margin:0;padding:.5rem 1rem}}",""])},567:function(e,t,o){"use strict";var n=o(343);o.n(n).a},568:function(e,t,o){(e.exports=o(51)(!1)).push([e.i,".input[data-v-8869b7f0]{background-color:#fff;border-radius:4px;border:1px solid #dcdfe6;box-sizing:border-box;color:#606266;display:block;font-size:inherit;height:40px;line-height:40px;outline:none;padding:0 15px;-webkit-transition:border-color .2s cubic-bezier(.645,.045,.355,1);transition:border-color .2s cubic-bezier(.645,.045,.355,1)}.input[data-v-8869b7f0]:hover{border-color:#c0c4cc}.input[data-v-8869b7f0]:focus{border-color:#409eff}.button[data-v-8869b7f0]{display:inline-block;line-height:1;white-space:nowrap;cursor:pointer;background:#fff;border:1px solid #dcdfe6;color:#606266;-webkit-appearance:none;text-align:center;box-sizing:border-box;outline:none;margin:0;-webkit-transition:.1s;transition:.1s;font-weight:500;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;padding:12px 20px;font-size:14px;border-radius:4px}@-webkit-keyframes blink-data-v-8869b7f0{0%{opacity:.5}50%{opacity:1}to{opacity:.5}}@keyframes blink-data-v-8869b7f0{0%{opacity:.5}50%{opacity:1}to{opacity:.5}}.mask[data-v-8869b7f0]{background-color:rgba(0,0,0,.4);position:fixed;top:0;left:0;right:0;bottom:0;z-index:100}.article-container[data-v-8869b7f0]{background-color:#e9e9e9}",""])},600:function(e,t,o){"use strict";o.r(t);o(367);var n=o(85),r=o(328),d=o(333),c=(o(334),o(0)),l=o(151),h=c.default.extend(l.Image),f={name:"MdView",data:function(){return{headList:[],isOpen:!1}},props:{mdText:{type:String,default:""},imageAddressHandler:{type:Function,default:function(e){return e}},autoScroll:{type:Boolean,default:!1}},computed:{mdHtml:function(){var e=this;if(null!=this.mdText&&""!==this.mdText){var t=d.b.parse(this.mdText),html=t.html,o=t.toc;return this.headList=o.map((function(t){return{text:t.text,id:t.id,level:e.getHeadLevel(t.headLevel),order:e.getHeadOrder(t.headLevel)}})),html}return""}},updated:function(){this.init()},methods:{init:function(){if(this.reMountDynamicComponent(),this.autoScroll){var e=n.a.getHeadIdFromHash();null!=e?this.scrollToHead(e):this.goTop()}},goTop:function(){this.$refs.mdContainer.scrollTop=0},toggleToc:function(){this.isOpen=!this.isOpen},clickTocItem:function(e){this.scrollToHead(e),this.isOpen=!1,this.$emit("scrollToHead",e)},scrollToHead:function(e){null!=document.getElementById(e)&&(this.$refs.mdContainer.scrollTop=document.getElementById(e).offsetTop)},getHeadLevel:function(e){for(var i=e.length-1;i>=0;i--)if(0!==e[i])return i;return 0},getHeadOrder:function(e){var i=this.getHeadLevel(e);return e.slice(0,i+1).join(".")},reMountDynamicComponent:function(){var e=this;this.destroyAllChildrenComponent(),this.$nextTick().then((function(){return e.dynamicMountLazyImage()}))},dynamicMountLazyImage:function(){var e=this;document.querySelectorAll(".markdown-body img").forEach((function(img){var t=e.imageAddressHandler(img.getAttribute("data-src"));new h({parent:e,props:{lazy:{default:!0},src:{default:t},previewSrcList:{default:function(){return[t]}}}}).$mount(img)}))},destroyAllChildrenComponent:function(){this.$children.forEach((function(e){e.$destroy()})),this.$children=[]}}},m=(o(563),o(26)),y=Object(m.a)(f,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"md-view"},[o("div",{staticClass:"toc",class:{"toc-open":e.isOpen}},e._l(e.headList,(function(t,n){return o("div",{key:n,staticClass:"toc-item",style:"padding-left:"+t.level+"rem",on:{click:function(o){return e.clickTocItem(t.id)}}},[e._v("\n            "+e._s(1===t.level||2===t.level?t.order+" "+t.text:t.text)+"\n        ")])})),0),e._v(" "),o("div",{ref:"mdContainer",staticClass:"md-container"},[o("div",{staticClass:"markdown-body",domProps:{innerHTML:e._s(e.mdHtml)}})])])}),[],!1,null,null,null).exports,v=o(314),x=o(53),w=o.n(x),k=o(356),H=o(321),T=o(123),C={name:"Article",components:{FullPageContainer:k.a,MdView:y,CommonTools:r.a},data:function(){return{post:{},id:1}},head:function(){return{title:this.post.title+"|Sidian'Blog"}},created:function(){this.refresh(),this.initHistoryEventListener()},mounted:function(){var e=this;this.$refs.commonTools.addButton({title:"目录",iconClass:"icon-menu",handler:function(){return e.$refs.mdView.toggleToc()}}),this.$refs.commonTools.addButton({title:"顶部",iconClass:"icon-top",handler:this.goTop}),v.a.isMobile()||this.$refs.commonTools.addButton({text:"编辑",iconClass:"icon-write",handler:function(){return w.a.get(T.b+"/typora/open/"+e.id)}})},methods:{pageJumpLogic:function(e){n.a.setUrlParam("id",e),this.refresh()},scrollToHeadHandler:function(e){location.hash="#"+e},imageAddressHandler:H.a.imageAddressHandler,refresh:function(){var e=this,t=n.a.getUrlParam("id");this.id=t,t=parseInt(t),isNaN(t)||t<0||w.a.get("/post/get/".concat(t)).then((function(t){var data=t.data;return e.post=data}))},getIdFromUrl:function(){var e=n.a.getUrlParam("id");return null!=e&&(e=parseInt(e)),e},initHistoryEventListener:function(){var e=this;window.onpopstate=function(){var t=e.getIdFromUrl();e.id===t?e.$refs.mdView.scrollToHead(location.hash.substr(1)):e.id=t}},handleIdChangeEvent:function(e){this.id=e,this.isShow=!1,this.$refs.mkContent.scrollTop=0,n.a.setUrlParam("id",e)},handleScrollEvent:function(e){this.scrollTo(e),this.isShow=!1,location.hash="#"+e},goTop:function(){this.$refs.mdView.goTop(),location.hash=""}}},L=(o(567),Object(m.a)(C,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"article-container"},[t("FullPageContainer",[t("MdView",{ref:"mdView",attrs:{"md-text":this.post.content,"image-address-handler":this.imageAddressHandler,"auto-scroll":!0},on:{scrollToHead:this.scrollToHeadHandler}})],1),this._v(" "),t("CommonTools",{ref:"commonTools",attrs:{"page-jump":this.pageJumpLogic}})],1)}),[],!1,null,"8869b7f0",null));t.default=L.exports}}]);